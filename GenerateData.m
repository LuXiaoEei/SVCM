function [Beta,A,Fai,Eta,X,Y_norm,Y_chip]=GenerateData(postion,N)
    NN=64*64*8;     %图像素
    NN=20*20*10;
%     N=60;     %subject
    l=1:3;

    d1=postion(:,1);    %x坐标
    d2=postion(:,2);    %y坐标
    d3=postion(:,3);    %z坐标

    beta1=zeros(size(d1));
    beta1(((10<d1)&(d1<=20)&(10<d2)&(d2<=20))|((40<d1)&(d1<=46)&(10<d2)&(d2<=30))|((10<d1)&(d1<=16)&(40<d2)&(d2<=52))|((40<d1)&(d1<=60)&(40<d2)&(d2<=43))|((40<d1)&(d1<=60)&(55<d2)&(d2<=60)))=0.2;
    beta1(((20<d1)&(d1<=30)&(10<d2)&(d2<=20))|((22<d1)&(d1<=30)&(46<d2)&(d2<=60))|((40<d1)&(d1<=60)&(46<d2)&(d2<=49)))=0.4;
    beta1(((10<d1)&(d1<=20)&(20<d2)&(d2<=30))|((46<d1)&(d1<=52)&(10<d2)&(d2<=30))|((10<d1)&(d1<=22)&(52<d2)&(d2<=60))|((40<d1)&(d1<=60)&(43<d2)&(d2<=46))|((40<d1)&(d1<=60)&(52<d2)&(d2<=55)))=0.6;
    beta1(((20<d1)&(d1<=30)&(20<d2)&(d2<=30))|((52<d1)&(d1<=60)&(10<d2)&(d2<=30))|((16<d1)&(d1<=30)&(40<d2)&(d2<=46))|((40<d1)&(d1<=60)&(49<d2)&(d2<=52)))=0.8;

    beta2=zeros(size(d1));
    beta2(((10<d1)&(d1<=20)&(10<d2)&(d2<=20))|((10<d1)&(d1<=16)&(40<d2)&(d2<=60))|((40<d1)&(d1<=46)&(10<d2)&(d2<=22))|((40<d1)&(d1<=60)&(40<d2)&(d2<=43))|((40<d1)&(d1<=60)&(55<d2)&(d2<=60)))=0.2;
    beta2(((20<d1)&(d1<=30)&(10<d2)&(d2<=20))|((52<d1)&(d1<=60)&(16<d2)&(d2<=30))|((40<d1)&(d1<=60)&(46<d2)&(d2<=49)))=0.4;
    beta2(((10<d1)&(d1<=20)&(20<d2)&(d2<=30))|((16<d1)&(d1<=22)&(40<d2)&(d2<=60))|((40<d1)&(d1<=52)&(22<d2)&(d2<=30))|((40<d1)&(d1<=60)&(43<d2)&(d2<=46))|((40<d1)&(d1<=60)&(52<d2)&(d2<=55)))=0.6;
    beta2(((20<d1)&(d1<=30)&(20<d2)&(d2<=30))|((22<d1)&(d1<=30)&(40<d2)&(d2<=60))|((46<d1)&(d1<=60)&(10<d2)&(d2<=16))|((40<d1)&(d1<=60)&(49<d2)&(d2<=52)))=0.8;

    beta3=zeros(size(d1));
    beta3(((10<d1)&(d1<=20)&(40<d2)&(d2<=50))|((10<d1)&(d1<=16)&(10<d2)&(d2<=30))|((40<d1)&(d1<=46)&(40<d2)&(d2<=52))|((40<d1)&(d1<=60)&(10<d2)&(d2<=13))|((40<d1)&(d1<=60)&(25<d2)&(d2<=30)))=0.2;
    beta3(((20<d1)&(d1<=30)&(40<d2)&(d2<=50))|((52<d1)&(d1<=60)&(46<d2)&(d2<=60))|((40<d1)&(d1<=60)&(16<d2)&(d2<=19)))=0.4;
    beta3(((10<d1)&(d1<=20)&(50<d2)&(d2<=60))|((16<d1)&(d1<=22)&(10<d2)&(d2<=30))|((40<d1)&(d1<=52)&(52<d2)&(d2<=60))|((40<d1)&(d1<=60)&(13<d2)&(d2<=16))|((40<d1)&(d1<=60)&(22<d2)&(d2<=25)))=0.6;
    beta3(((20<d1)&(d1<=30)&(50<d2)&(d2<=60))|((22<d1)&(d1<=30)&(10<d2)&(d2<=30))|((46<d1)&(d1<=60)&(40<d2)&(d2<=46))|((40<d1)&(d1<=60)&(19<d2)&(d2<=22)))=0.8;
    % imagesc(reshape(beta3(d3==1),64,64))

    Beta=[beta1,beta2,beta3];   %协变量变系数
    A=zeros(N,size(l,2));   %随机效应的系数
    Fai=cell(N,1);    %特征函数
    Eta=cell(N,1);     %随机效应
    X=zeros(N,size(l,2));     %协变量
    Y_norm=zeros(N,NN);
    Y_chip=zeros(N,NN);
    for i=1:N
        esp_norm=normrnd(0,1,NN,1);    % N(0,1)
        esp_chip=chi2rnd(3,NN,1).^2-3;    % chip(3)^2-3
        A(i,:)=[normrnd(0,0.6),normrnd(0,0.3),normrnd(0,0.1)];    %随机效应的系数
        Fai{i,1}=[0.5*sin(2*pi*d1/64),0.5*cos(2*pi*d2/64),sqrt(1/2.625)*(9/8-d3/4)];    %特征函数
        Eta{i,1}=A(i,:)*Fai{i,1}';   %随机效应
        X(i,:)=[1,binornd(1,0.5),unifrnd(1,2,1)];   %协变量
        Y_norm(i,:)=X(i,:)*Beta'+Eta{i,1}+esp_norm';
        Y_chip(i,:)=X(i,:)*Beta'+Eta{i,1}+esp_chip';
    end
    % imagesc(reshape(Y_norm(d3==1),64,64))
end
